{"ast":null,"code":"import * as ActionTypes from \"../actions/authActions\";\nimport axios from \"axios\";\nimport { history } from \"../helpers/history\";\nimport { BASE_PATH } from \"../ApiBasePath/ApiBasePath\";\nexport const authStart = authData => {\n  return {\n    type: ActionTypes.AUTH_START\n  };\n};\nexport const authSuccess = authData => {\n  return {\n    type: ActionTypes.AUTH_SUCCESS,\n    authData: authData\n  };\n};\nexport const authFail = error => {\n  return {\n    type: ActionTypes.AUTH_FAIL,\n    error: error\n  };\n}; // export const userActions = {\n//   auth\n// };\n\nexport function auth(email, password) {\n  const url = `${BASE_PATH}/Oauth/rest/client/auth?domain=dev.asista.in`;\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    \"device-type\": \"web\"\n  };\n  const credentials = {\n    username: email.username,\n    password: email.password\n  };\n  return dispatch => {\n    dispatch(authStart());\n    axios.post(url, credentials, {\n      headers: headers\n    }).then(res => {\n      dispatch(authSuccess(email, password));\n      localStorage.setItem(\"X-Auth-Token\", res.data.access_token);\n      localStorage.setItem(\"refresh-token\", res.data.refresh_token);\n      history.push(\"/home\");\n      window.location.reload();\n    }).catch(error => {\n      dispatch(authFail(error.response.data));\n      console.log(error.response);\n      error.response.status === 457 && alert(\"You entered wrong username and password\");\n    });\n  };\n}","map":{"version":3,"sources":["/home/cherry-dev-04/user-ui/src/ApiCall/AuthApi.js"],"names":["ActionTypes","axios","history","BASE_PATH","authStart","authData","type","AUTH_START","authSuccess","AUTH_SUCCESS","authFail","error","AUTH_FAIL","auth","email","password","url","headers","credentials","username","dispatch","post","then","res","localStorage","setItem","data","access_token","refresh_token","push","window","location","reload","catch","response","console","log","status","alert"],"mappings":"AAAA,OAAO,KAAKA,WAAZ,MAA6B,wBAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,SAAT,QAA0B,4BAA1B;AACA,OAAO,MAAMC,SAAS,GAAGC,QAAQ,IAAI;AACnC,SAAO;AACLC,IAAAA,IAAI,EAAEN,WAAW,CAACO;AADb,GAAP;AAGD,CAJM;AAKP,OAAO,MAAMC,WAAW,GAAGH,QAAQ,IAAI;AACrC,SAAO;AACLC,IAAAA,IAAI,EAAEN,WAAW,CAACS,YADb;AAELJ,IAAAA,QAAQ,EAAEA;AAFL,GAAP;AAID,CALM;AAMP,OAAO,MAAMK,QAAQ,GAAGC,KAAK,IAAI;AAC/B,SAAO;AACLL,IAAAA,IAAI,EAAEN,WAAW,CAACY,SADb;AAELD,IAAAA,KAAK,EAAEA;AAFF,GAAP;AAID,CALM,C,CAMP;AACA;AACA;;AAEA,OAAO,SAASE,IAAT,CAAcC,KAAd,EAAqBC,QAArB,EAA+B;AACpC,QAAMC,GAAG,GAAI,GAAEb,SAAU,8CAAzB;AAEA,QAAMc,OAAO,GAAG;AACd,oBAAgB,kBADF;AAEd,mBAAe;AAFD,GAAhB;AAIA,QAAMC,WAAW,GAAG;AAClBC,IAAAA,QAAQ,EAAEL,KAAK,CAACK,QADE;AAElBJ,IAAAA,QAAQ,EAAED,KAAK,CAACC;AAFE,GAApB;AAIA,SAAOK,QAAQ,IAAI;AACjBA,IAAAA,QAAQ,CAAChB,SAAS,EAAV,CAAR;AACAH,IAAAA,KAAK,CACFoB,IADH,CACQL,GADR,EACaE,WADb,EAC0B;AAAED,MAAAA,OAAO,EAAEA;AAAX,KAD1B,EAEGK,IAFH,CAEQC,GAAG,IAAI;AACXH,MAAAA,QAAQ,CAACZ,WAAW,CAACM,KAAD,EAAQC,QAAR,CAAZ,CAAR;AACAS,MAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCF,GAAG,CAACG,IAAJ,CAASC,YAA9C;AACAH,MAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCF,GAAG,CAACG,IAAJ,CAASE,aAA/C;AACA1B,MAAAA,OAAO,CAAC2B,IAAR,CAAa,OAAb;AACAC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,KARH,EASGC,KATH,CASStB,KAAK,IAAI;AACdS,MAAAA,QAAQ,CAACV,QAAQ,CAACC,KAAK,CAACuB,QAAN,CAAeR,IAAhB,CAAT,CAAR;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAYzB,KAAK,CAACuB,QAAlB;AACAvB,MAAAA,KAAK,CAACuB,QAAN,CAAeG,MAAf,KAA0B,GAA1B,IACEC,KAAK,CAAC,yCAAD,CADP;AAED,KAdH;AAeD,GAjBD;AAkBD","sourcesContent":["import * as ActionTypes from \"../actions/authActions\";\nimport axios from \"axios\";\nimport { history } from \"../helpers/history\";\nimport { BASE_PATH } from \"../ApiBasePath/ApiBasePath\";\nexport const authStart = authData => {\n  return {\n    type: ActionTypes.AUTH_START\n  };\n};\nexport const authSuccess = authData => {\n  return {\n    type: ActionTypes.AUTH_SUCCESS,\n    authData: authData\n  };\n};\nexport const authFail = error => {\n  return {\n    type: ActionTypes.AUTH_FAIL,\n    error: error\n  };\n};\n// export const userActions = {\n//   auth\n// };\n\nexport function auth(email, password) {\n  const url = `${BASE_PATH}/Oauth/rest/client/auth?domain=dev.asista.in`;\n\n  const headers = {\n    \"Content-Type\": \"application/json\",\n    \"device-type\": \"web\"\n  };\n  const credentials = {\n    username: email.username,\n    password: email.password\n  };\n  return dispatch => {\n    dispatch(authStart());\n    axios\n      .post(url, credentials, { headers: headers })\n      .then(res => {\n        dispatch(authSuccess(email, password));\n        localStorage.setItem(\"X-Auth-Token\", res.data.access_token);\n        localStorage.setItem(\"refresh-token\", res.data.refresh_token);\n        history.push(\"/home\");\n        window.location.reload();\n      })\n      .catch(error => {\n        dispatch(authFail(error.response.data));\n        console.log(error.response);\n        error.response.status === 457 &&\n          alert(\"You entered wrong username and password\");\n      });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}